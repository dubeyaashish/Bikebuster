{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aashi.DESKTOP-E6C1U98/Downloads/ishtylemine/ishtylemine/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aashi.DESKTOP-E6C1U98/Downloads/ishtylemine/ishtylemine/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aashi.DESKTOP-E6C1U98/Downloads/ishtylemine/ishtylemine/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useContext,useState}from\"react\";import{Link,Navigate,useParams}from\"react-router-dom\";import{UserContext}from\"../UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AccountPage(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),redirect=_useState2[0],setRedirect=_useState2[1];var _useContext=useContext(UserContext),ready=_useContext.ready,user=_useContext.user,setUser=_useContext.setUser;var _useParams=useParams(),subpage=_useParams.subpage;if(subpage===undefined){subpage='profile';}function logout(){return _logout.apply(this,arguments);}function _logout(){_logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/logout');case 2:setRedirect('/');setUser(null);case 4:case\"end\":return _context.stop();}},_callee);}));return _logout.apply(this,arguments);}if(!ready){return'Loading...';}if(ready&&!user&&!redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/login'});}console.log(subpage);function linkClasses(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var classes='p-2 px-6';if(type===subpage){classes+='primary text-blue-500 rounded-full';}return classes;}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:redirect});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"w-full flex justify-center mt-8 gap-2\",children:[/*#__PURE__*/_jsx(Link,{className:linkClasses('profile'),to:'/account',children:\"My Profile\"}),/*#__PURE__*/_jsx(Link,{className:linkClasses('bookings'),to:'/account/bookings',children:\"My Bookings\"}),/*#__PURE__*/_jsx(Link,{className:linkClasses('stylist'),to:'/account/stylist',children:\"Stylists\"})]}),subpage==='profile'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-lg mx-auto\",children:[\"Logged in as \",user.name,\" (\",user.email,\")\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"primary max-w-sm mt-2\",children:\"Logout\"})]})]});}","map":{"version":3,"names":["axios","useContext","useState","Link","Navigate","useParams","UserContext","jsx","_jsx","jsxs","_jsxs","AccountPage","_useState","_useState2","_slicedToArray","redirect","setRedirect","_useContext","ready","user","setUser","_useParams","subpage","undefined","logout","_logout","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","stop","to","console","log","linkClasses","type","length","classes","children","className","name","email","onClick"],"sources":["C:/Users/aashi.DESKTOP-E6C1U98/Downloads/ishtylemine/ishtylemine/client/src/pages/AccountPage.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useContext, useState } from \"react\";\nimport { Link, Navigate, useParams } from \"react-router-dom\";\nimport { UserContext } from \"../UserContext\";\n\nexport default function AccountPage() {\n    const [redirect,setRedirect] = useState(null);\n    const {ready,user,setUser} = useContext(UserContext);\n    let { subpage } = useParams();\n    if (subpage === undefined) {\n        subpage = 'profile';\n    }\n\n    async function logout() {\n        await axios.post('/logout');\n        setRedirect('/');\n        setUser(null);\n    }\n\n    if (!ready) {\n        return 'Loading...';\n    }\n\n    if (ready && !user && !redirect) {\n        return <Navigate to={'/login'} />\n    }\n\n\n    console.log(subpage);\n\n    function linkClasses (type=null) {\n        let classes = 'p-2 px-6';\n        if (type ===subpage) {\n            classes += 'primary text-blue-500 rounded-full';\n        }\n        return classes;\n    }\n\n    if (redirect) {\n        return <Navigate to={redirect} />\n    }\n\n    return (\n        <div>\n            <nav className=\"w-full flex justify-center mt-8 gap-2\">\n            <Link className={linkClasses('profile')} to={'/account'}>My Profile</Link>\n            <Link className={linkClasses('bookings')} to={'/account/bookings'}>My Bookings</Link>\n            <Link className={linkClasses('stylist')} to={'/account/stylist'}>Stylists</Link>\n            </nav>\n            {subpage ==='profile' && (\n                <div className=\"text-center max-w-lg mx-auto\">\n                    Logged in as {user.name} ({user.email})<br />\n                    <button onClick={logout} className=\"primary max-w-sm mt-2\">Logout</button>\n                </div>\n            )}\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}